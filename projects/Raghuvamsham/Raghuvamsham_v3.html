<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<style>
* {
  box-sizing: border-box;
}

.menu {
  float: left;
  width: 20%;
  text-align: center;
}

.scrollable-menu {
    height: auto;
    max-height: 200px;
    overflow-x: hidden;
}

.menu a {
  background-color: #93FF33;
  padding: 8px;
  margin-top: 7px;
  display: block;
  width: 100%;
  color: black;
}

.menu option{
  background-color: #93FF33;
  padding: 8px;
  margin-top: 7px;
  display: block;
  width: 100%;
  color: black;
}

.main {
  float: left;
  width: 60%;
  padding: 0 20px;
}

.center {
  background-color: #e5e5e5;
  float: center;
  width: 20%;
  padding: 15px;
  margin-top: 7px;
  text-align: center;
}

.right {
  background-color: #e5e5e5;
  float: right;
  width: 20%;
  padding: 15px;
  margin-top: 7px;
  text-align: center;
}

.footer {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: #33A2FF;
  color: black;
  text-align: center;
}

.stickyheader {
  position: -webkit-sticky;
  position: sticky;
  left: 0;
  top: 0;
  width: 100%;
  background-color: #33A2FF;
  color: black;
  text-align: center;
  z-index: 10;
}

.stickyfooter {
  position: -webkit-sticky;
  position: sticky;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: #33A2FF;
  color: black;
  text-align: center;
}

@media only screen and (max-width: 620px) {
  /* For mobile phones: */
  .menu, .main, .right {
    width: 100%;
  }
}
</style>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.13.5/xlsx.full.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.13.5/jszip.js"></script>
<script type="text/javascript">
  $(document).ready(function () {
    $('#Sarga a').on('click', function () {
      var sarga= ($(this).text());

      if (sarga == "1") {
            len = 95;
      } 
      else {
          len = 76;
      }
      $("#Shloka").empty();
      for (var i = 1; i<=len; i++) {
    var ele = document.createElement("a");
    ele.classList = "dropdown-item";
    ele.href = "#";
    ele.innerText = "" + i;
    document.querySelector('#Shloka').appendChild(ele);
  }
   $('#Shloka a').on('click', function () {
    var shloka= ($(this).text());
      $.ajaxPrefilter( 'script', function( options ) {
    options.crossDomain = true;
});

$.ajax({
  type: "GET",
  url: 'Raghuvamshamdata.csv',
}).done(successFunction);

function successFunction(data) {
  var table = null;
  
 $('.mt-auto').remove(); 
$("div.desc").empty();
$('#sel').removeAttr('disabled');
// var headerArr = [];
headerArr = ["सर्गसंख्या","श्लोकसंख्या","पद्यस्य पूर्वभूमिका", "पद्यम्", "पदविभागः", "दण्डान्वयः", "तात्पर्यकथनम्"];
data = data.replace(/(?:\r\n|\r|\n)/g, '<br>');
  //alert("sarga:" + sarga + "\nshloka:" +shloka);
data = data.replace(/"/g,"");
  var allRows = data.split("$");
  for (var singleRow = 0; singleRow < allRows.length; singleRow++) {
    var rowCells = allRows[singleRow].split(',');
    rowCells.length = headerArr.length;
    // abc = "<br>"+rowCells[0];
    // alert (abc);
    if ("<br>"+sarga == rowCells[0]) {
    if (shloka == rowCells[1]) {
       table = '<div class="container">';
      table += '<div class="row">';  
    for (var rowCell = 2,i=1; rowCell < rowCells.length; rowCell++,i++) {
      if(i%2==0) {
        table += '<div class="col-sm-4 bg-white text-black">';
        table += '<h5><b>'+headerArr[rowCell]+'</b></h5><p>';
        table += rowCells[rowCell];
        table += '</p></div>';
      } else {
        table += '<div class="col-sm-4 bg-warning text-black">';
        table += '<h5><b>'+headerArr[rowCell]+'</b></h5><p>';
        table += rowCells[rowCell];
        table += '</p></div>';
      }
      if (i%3==0) {
        table += '</div></div></div>';
        table += '<div class="container"><div class="row">';
    }
   
  }
} 
}
   
  }
  if (table != null) {
  table += '</div></div>';
  table += '</div></div>';
//  let footer = ' <!-- Copyright -->'+
//  '<footer class="stickyfooter">'+
//     '<div style="background-color:#33A2FF;text-align:center;padding:10px;margin-top:7px">© Karnataka Samskrit University</div>'+
//   '</div>'+
// '</footer>';
let footer =
'<div class="footer">'+
  '<div style="background-color:#33A2FF;text-align:center;padding:10px">© Karnataka Samskrit University</div>'+
'</div>';
 table += footer;
  $("div.desc").append(table);
} else {
   $('#sel').attr('disabled','disabled');
   $("div.desc").append("The data will be available soon...");
let footer =
'<div class="footer">'+
  '<div style="background-color:#33A2FF;text-align:center;padding:10px">© Karnataka Samskrit University</div>'+
'</div>';
  $("div.desc").append(footer);
} 
$('#selection a').on("change", ".select", function() {
//   var arr = [];
var headerArr = ["सर्गसंख्या","श्लोकसंख्या","पद्यस्य पूर्वभूमिका", "पद्यम्", "पदविभागः", "दण्डान्वयः", "तात्पर्यकथनम्"];
var rowArr = [0, 1, 2, 3, 4, 5, 6];
  $(".select:checked").each(function() {
    var valArr = $(this).val().split(",");
    headerArr.push(valArr[1]);
    parseInt(rowArr.push(valArr[0]));
  });
  //alert('headerArr:' + headerArr);
   $('.mt-auto').remove(); 
$("div.desc").empty();
  // var headerArr = ["सर्गसंख्या","श्लोकसंख्या","पद्यस्य पूर्वभूमिका", "पद्यम्", "पदविभागः", "दण्डान्वयः", "तात्पर्यकथनम्", "भावार्थकथनम्","पदार्थकथनम्", "आकाङ्क्षान्वयः", "पदपरिचयः", "अमरकोशवाचनम्", "विशिष्टसुबन्तशब्दानां वाचनम्", "क्रियापदवाचनम्", "सन्धिः", "विग्रहः", "प्रक्रिया", "आलङ्कारिकाः विशेषाः", "छन्दः"];
  data = data.replace(/(?:\r\n|\r|\n)/g, '<br>');
  //alert("sarga:" + sarga + "\nshloka:" +shloka);
data = data.replace(/"/g,"");
  var allRows = data.split("$");
  for (var singleRow = 0; singleRow < allRows.length; singleRow++) {
    var rowCells = allRows[singleRow].split(',');
    //rowCells.length = headerArr.length;
    // abc = "<br>"+rowCells[0];
    // alert (abc);
    if ("<br>"+sarga == rowCells[0]) {
    if (shloka == rowCells[1]) {
       table = '<div class="container">';
      table += '<div class="row">';  
    for (var rowCell = 2,i=1; rowCell < headerArr.length; rowCell++,i++) {
      if(i%2==0) {
        table += '<div class="col-sm-4 bg-white text-black">';
        table += '<h5><b>'+headerArr[rowCell]+'</b></h5><p>';
        table += rowCells[rowArr[rowCell]];
        table += '</p></div>';
      } else {
        table += '<div class="col-sm-4 bg-warning text-black">';
        table += '<h5><b>'+headerArr[rowCell]+'</b></h5><p>';
        table += rowCells[rowArr[rowCell]];
        table += '</p></div>';
      }
      if (i%3==0) {
        table += '</div></div></div>';
        table += '<div class="container"><div class="row">';
    }
   
  }
} 
}
   
  }
  if (table != null) {
  table += '</div></div>';
  table += '</div></div>';
//  let footer = ' <!-- Copyright -->'+
//  '<footer class="stickyfooter">'+
//     '<div style="background-color:#33A2FF;text-align:center;padding:10px;margin-top:7px">© Karnataka Samskrit University</div>'+
//   '</div>'+
// '</footer>';
let footer =
'<div class="footer">'+
  '<div style="background-color:#33A2FF;text-align:center;padding:10px">© Karnataka Samskrit University</div>'+
'</div>';
 table += footer;
  $("div.desc").append(table);
} else {
   $('#sel').attr('disabled','disabled');
   $("div.desc").append("The data will be available soon...");
let footer =
'<div class="footer">'+
  '<div style="background-color:#33A2FF;text-align:center;padding:10px">© Karnataka Samskrit University</div>'+
'</div>';
  $("div.desc").append(footer);
} 
});

}
    });

    });
     
});
 
</script>
</head>
<body style="font-family:Verdana;color:#17202A;" class="d-flex flex-column min-vh-100">
<div class="stickyheader">
<div style="background-color:#33A2FF;padding:15px;text-align:center;">
  <h1>रघुवंशम्</h1>
</div>
</div>
<br>
  <!-- <button type="button" class="btn btn-primary" data-toggle="collapse" data-target="#demo">Simple collapsible</button>

  <div id="demo" class="collapse"> -->
  </div>
   <!--  <div class="checkbox">
        <label><input type="checkbox">Pratipadartham</label>
        <label><input type="checkbox">Bhavarthah</label>
      </div> -->
  </div>
<div class="container">
 <div class="btn-group">
        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
         सर्गसंख्या
        </button>
        <div class="dropdown-menu" id="Sarga">
          <a class="dropdown-item" href="#">1</a>
          <a class="dropdown-item" href="#">2</a>
        </div>
    </div>
    <div class="btn-group">
        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
         श्लोकसंख्या
        </button>
        <div class="dropdown-menu scrollable-menu" id="Shloka" role="menu">
        </div>
    </div>
    <div class="btn-group">
        <button id="sel" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" disabled="disabled">Options</button>
<div class="dropdown-menu" id="selection">
 <!--  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "सर्गसंख्या" checked disabled />सर्गसंख्या</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "श्लोकसंख्या" checked disabled/>श्लोकसंख्या</a> -->
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "7,भावार्थकथनम्"/>भावार्थकथनम्</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value = "8,पदार्थकथनम्"/>पदार्थकथनम्</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "9,आकाङ्क्षान्वयः"/>आकाङ्क्षान्वयः</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value = "10,पदपरिचयः"/>पदपरिचयः</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "11,अमरकोशवाचनम्"/>अमरकोशवाचनम्</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value = "12,विशिष्टसुबन्तशब्दानां वाचनम्"/>विशिष्टसुबन्तशब्दानां वाचनम्</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "13,क्रियापदवाचनम्"/>क्रियापदवाचनम्</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value = "14,सन्धिः"/>सन्धिः</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "15,विग्रहः"/>विग्रहः</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value = "16,प्रक्रिया"/>प्रक्रिया</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value= "17,आलङ्कारिकाः विशेषाः"/>आलङ्कारिकाः विशेषाः</a>
  <a class="dropdown-item" href="#"><input type="checkbox" class="select" name="selected" value = "18,छन्दः"/>छन्दः</a>
</div>
</div>
</div>
</div>
<br>

<div class="desc" id="desc">
  </div>
 <!-- Copyright -->
 <footer class="mt-auto">
    <div style="background-color:#33A2FF;text-align:center;padding:10px;margin-top:7px">© Karnataka Samskrit University</div>
  </div>
</footer>
</body>
</html>

